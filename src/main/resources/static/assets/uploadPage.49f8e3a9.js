import{j as x,r as l,o as w,c as C,_ as E,m as v,g as U,n as I,w as n,p as y,d as e,e as L,u as m,f as A}from"./index.138fa8f9.js";import{h as P}from"./moment.17f8281e.js";const Y=x({props:{page:{type:Number,default:1},limit:{type:Number,default:10},listCount:{type:Number,default:0},loadList:{type:Function,default:()=>{}}},emits:["update:page","update:limit"],setup(g,{emit:p}){const i=g,s=u=>{p("update:page",1),p("update:limit",u),i.loadList()},_=u=>{p("update:page",u),i.loadList()};return(u,f)=>{const r=l("el-pagination");return w(),C(r,{"current-page":i.page,"page-size":i.limit,"page-sizes":[10,50,100,500],background:"",layout:"total, sizes, prev, pager, next, jumper",total:i.listCount,onSizeChange:s,onCurrentChange:_},null,8,["current-page","page-size","total"])}}});const M={padding:"10px"},V=A(" \u70B9\u51FB\u4E0A\u4F20"),$=x({setup(g){const p=v([]),i=v(0),s=U({page:1,limit:10,userId:""}),_=async()=>{const o=await y.get("/filePage",{params:s}).then(t=>t.data.data);p.value=o.listData,i.value=o.count,console.log("-----\u52A0\u8F7D\u6570\u636E-----",o)},u=(o,t)=>{console.log("----------------"),console.log(o,t.fileUrl);const a=document.createElement("a");a.style.display="none",a.href=t.fileUrl,a.setAttribute("download",t.fileName),document.body.appendChild(a),a.click()},f=(o,t)=>{const a=o[t.property];return a===void 0?"":P(a).format("YYYY-MM-DD")},r=new FormData,F=(o,t)=>{t.length>0&&(r.append("File",o.raw),y.post("/upfile",r).then(a=>{console.log(a.data),r.delete("File")}).catch(a=>{console.log(a)}))};return I(()=>{_()}),(o,t)=>{const a=l("Upload"),z=l("el-icon"),h=l("el-button"),k=l("el-upload"),b=l("el-card"),c=l("el-table-column"),B=l("vue-feather"),D=l("el-table"),N=l("el-space");return w(),C(N,{size:"20px",direction:"direction",fill:!0,wrap:""},{default:n(()=>[e(b,null,{default:n(()=>[L("div",M,[e(k,{action:"",multiple:"",limit:10,accept:".pdf","on-change":F},{default:n(()=>[e(h,{size:"large",type:"primary",margin:"5px"},{default:n(()=>[V,e(z,{class:"el-icon--right"},{default:n(()=>[e(a)]),_:1})]),_:1})]),_:1})])]),_:1}),e(b,null,{default:n(()=>[e(D,{height:"62vh",data:p.value,style:{width:"100%"},border:"",stripe:""},{default:n(()=>[e(c,{fixed:"",prop:"fileId",label:"ID",width:"50"}),e(c,{prop:"fileName",label:"\u540D\u79F0",width:"200"}),e(c,{prop:"ct",label:"\u65E5\u671F",width:"150",formatter:f}),e(c,{prop:"userId",label:"\u4E0A\u4F20\u7528\u6237",width:"100"}),e(c,{fixed:"right",label:"\u70B9\u51FB\u4E0B\u8F7D",width:"auto"},{default:n(d=>[e(h,{size:"small",type:"text"},{default:n(()=>[e(B,{type:"download","stroke-width":"1.5",size:"24",onClick:j=>u(d.$index,d.row)},null,8,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),e(Y,{page:m(s).page,"onUpdate:page":t[0]||(t[0]=d=>m(s).page=d),limit:m(s).limit,"onUpdate:limit":t[1]||(t[1]=d=>m(s).limit=d),"list-count":i.value,"load-list":_,margin:"5px"},null,8,["page","limit","list-count"])]),_:1})]),_:1})}}});var T=E($,[["__scopeId","data-v-8fad7c90"]]);export{T as default};
